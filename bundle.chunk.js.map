{"version":3,"sources":["webpack:///./src/index.tsx","webpack:///./src/model.ts"],"names":[],"mappings":"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","file":"bundle.chunk.js","sourcesContent":["///<reference path=\"../References.d.ts\" />\r\nimport React = require('react')\r\nimport ReactDOM = require('react-dom')\r\nimport {toJS} from 'mobx'\r\nimport {observer} from 'mobx-react'\r\nimport {Element, elementStore} from './model'\r\nimport _ = require('lodash')\r\n\r\n// Ridiculous way to create keys.\r\n// Thanks to http://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript/105078#105078\r\nfunction generateGuid() {\r\n    var result, i, j;\r\n    result = '';\r\n    for (j = 0; j < 32; j++) {\r\n        if(j == 8 || j == 12|| j == 16|| j == 20) \r\n            result = result + '-'\r\n        i = Math.floor(Math.random() * 16).toString(16).toUpperCase()\r\n        result = result + i\r\n    }\r\n    return result\r\n}\r\n\r\n\r\nconst App = observer((props) => {\r\n    const rootElement = elementStore.root\r\n    console.log(toJS(rootElement.children))\r\n\r\n    return (\r\n        <div>\r\n            <div>\r\n                <button onClick={() => rootElement.add(new Element())}>\r\n                    Add children\r\n                </button>\r\n            </div>\r\n            <List elements={rootElement.children} />\r\n        </div>\r\n    )\r\n})\r\n\r\nconst Item = observer((props) => {\r\n    let element = props.element\r\n   \r\n    return (\r\n        <div className=\"checklist\">\r\n            <div className=\"header\">\r\n                <input type=\"checkbox\" checked={element.checked} onChange={(v) => { element.checked = v.target.checked}}/>\r\n                <input type=\"text\" value={element.name} onChange={(v) => { element.name = v }} />\r\n                <button onClick={ () => element.remove()}>\r\n                    Delete\r\n                </button>\r\n                <button onClick={() => element.add(new Element())}>\r\n                    Add children\r\n                </button>\r\n            </div>\r\n            <List elements={element.children} />\r\n        </div>\r\n    )\r\n})\r\n\r\nconst List = (props => {\r\n    // console.log(_.map(elements, item => item))\r\n\r\n    return (\r\n        <div className='children'>\r\n            {_.map(props.elements, item => <Item key={generateGuid()} element={item} />)}\r\n        </div>\r\n    )\r\n})\r\n\r\nReactDOM.render( <App />, document.getElementById('app-mount-root'))\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.tsx\n **/","///<reference path=\"../References.d.ts\" />\r\nimport {observable, autorun, transaction, computed, action, reaction} from 'mobx'\r\nimport _ = require('lodash')\r\n\r\nexport class ElementStore {\r\n    @observable root: Element = new Element()\r\n}\r\n\r\nexport class Element {\r\n    name: string\r\n\r\n    @observable checked: boolean = true\r\n    @observable children: Element[] = []\r\n    @observable parent: Element\r\n\r\n    constructor() {\r\n        // Set reaction for checked property\r\n        reaction(() => this.checked, checked => {\r\n            transaction(() => {\r\n                if (this.isChecked != checked)\r\n                    for (let c of this.children)\r\n                        c.checked = checked\r\n            })\r\n        })\r\n\r\n        // Set reaction for checked property of every children\r\n        reaction(() => this.children.map(f => f.checked), childrenChecked => {\r\n            if (this.children.length)\r\n                this.checked = this.isChecked\r\n        })\r\n    }\r\n    \r\n    @computed get isChecked() {\r\n        return this.children.every(f => f.checked)\r\n    }\r\n\r\n    @action remove() {\r\n        if (this.parent.children.length != 0)\r\n            _.remove(this.parent.children, this)\r\n    }\r\n\r\n    @action add(e: Element) {\r\n        e.parent = this\r\n        this.children.push(e)\r\n    }\r\n}\r\n\r\nexport const elementStore = new ElementStore()\n\n\n/** WEBPACK FOOTER **\n ** ./src/model.ts\n **/"],"sourceRoot":""}